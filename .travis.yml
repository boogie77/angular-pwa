# sudo: required
# dist: trusty
# addons:
#   chrome: stable
# language: node_js
# node_js:
#   - "9"
# cache:
#   directories:
#     - node_modules
# branches:
#   only:
#     - master
# notifications:
#   email: true

# before_script:
#   - npm prune
#   - "sh -e /etc/init.d/xvfb start"
#   - sleep 3 # give xvfb some time to start

  
# script:
#   - xvfb-run npm run e2e
#    - npm run lint
#    - npm run test
# after_success:
#   - npm run build
  
language: node_js
node_js:
  - "8"
dist: trusty
sudo: required

cache:
  directories:
    - node_modules

addons:
  apt:
    sources:
      - google-chrome
    packages:
      - google-chrome-stable

  before_script:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start

script:
- npm run lint
  # - npm run test:headless
  - npm run build --prod
  - xvfb-run npm run e2e